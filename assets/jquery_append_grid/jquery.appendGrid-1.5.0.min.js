/*!
* jQuery appendGrid v1.5.0
* https://appendgrid.apphb.com/
*
* Copyright 2014 Albert L.
* Dual licensed under the LGPL (http://www.gnu.org/licenses/lgpl.html)
* and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.
*
* Depends:
* jQuery v1.9.1+
* jquery UI v1.10.2+
*/
(function(g){var s={caption:null,captionTooltip:null,initRows:3,initData:null,columns:null,i18n:null,idPrefix:null,rowDragging:false,hideButtons:null,hideRowNumColumn:false,rowButtonsInFront:false,rowCountName:"_RowCount",buttonClasses:null,sectionClasses:null,customGridButtons:null,customRowButtons:null,customFooterButtons:null,useSubPanel:false,subPanelBuilder:null,subPanelGetter:null,nameFormatter:null,dataLoaded:null,rowDataLoaded:null,afterRowAppended:null,afterRowInserted:null,afterRowSwapped:null,beforeRowRemove:null,afterRowRemoved:null,afterRowDragged:null};var y={type:"text",name:null,value:null,display:null,displayCss:null,displayTooltip:null,headerSpan:1,cellCss:null,ctrlAttr:null,ctrlProp:null,ctrlCss:null,ctrlClass:null,ctrlOptions:null,uiOption:null,uiTooltip:null,resizable:false,invisible:false,emptyCriteria:null,customBuilder:null,customGetter:null,customSetter:null,onClick:null,onChange:null};var t={noColumnInfo:"Cannot initial grid without column information!",elemNotTable:"Cannot initial grid on element other than TABLE!",notInit:"`appendGrid` does not initialized",getValueMultiGrid:"Cannot get values on multiple grid",notSupportMethod:"Method is not supported by `appendGrid`: "};var w={append:"Append Row",removeLast:"Remove Last Row",insert:"Insert Row Above",remove:"Remove Current Row",moveUp:"Move Up",moveDown:"Move Down",rowDrag:"Sort Row",rowEmpty:"This Grid Is Empty"};var l={append:null,removeLast:null,insert:null,remove:null,moveUp:null,moveDown:null,rowDrag:null};var n={caption:null,header:null,body:null,subPanel:null,footer:null};var f={append:false,removeLast:false,insert:false,remove:false,moveUp:false,moveDown:false};var k={init:function(G){var U=this;if(U.length>0){if(!g.isArray(G.columns)||G.columns.length==0){alert(t.noColumnInfo);return U}var P=U[0],H,L,T,R,D;if(o(P.tagName)||P.tagName!="TABLE"){alert(t.elemNotTable);return U}var S=g.extend({},s,G);g.extend(S,{_uniqueIndex:0,_rowOrder:[],_isDataLoaded:false,_visibleCount:0,_finalColSpan:0,_hideLastColumn:false});if(g.isPlainObject(G.i18n)){S._i18n=g.extend({},w,G.i18n)}else{S._i18n=g.extend({},w)}if(g.isPlainObject(G.buttonClasses)){S._buttonClasses=g.extend({},l,G.buttonClasses)}else{S._buttonClasses=g.extend({},l)}if(g.isPlainObject(G.sectionClasses)){S._sectionClasses=g.extend({},n,G.sectionClasses)}else{S._sectionClasses=g.extend({},n)}if(g.isPlainObject(G.hideButtons)){S.hideButtons=g.extend({},f,G.hideButtons)}else{S.hideButtons=g.extend({},f)}if(o(S.idPrefix)){if(o(P.id)||P.id==""){S.idPrefix="ag"+new Date().getTime()}else{S.idPrefix=P.id}}if(!g.isPlainObject(S.customGridButtons)){S.customGridButtons={}}if(S.useSubPanel&&S.rowDragging){S.rowDragging=false}H=document.createElement("thead");H.className="ui-widget-header";L=document.createElement("tbody");L.className="ui-widget-content";T=document.createElement("tfoot");T.className="ui-widget-header";g(P).empty().addClass("appendGrid ui-widget").append(H,L,T);var E,O;H.appendChild(R=document.createElement("tr"));if(S._sectionClasses.header){R.className=S._sectionClasses.header}if(!S.hideRowNumColumn){R.appendChild(E=document.createElement("td"));E.className="ui-widget-header"}var I=0;for(var J=0;J<S.columns.length;J++){var N=g.extend({},y,S.columns[J]);S.columns[J]=N;if(S.columns[J].type!="hidden"){if(!S.columns[J].invisible){S._visibleCount++}if(I==0){var F="ui-widget-header";if(S.columns[J].invisible){F+=" invisible"}if(S.columns[J].resizable){F+=" resizable"}R.appendChild(D=document.createElement("td"));D.id=S.idPrefix+"_"+S.columns[J].name+"_td_head";D.className=F;if(S.columns[J].displayCss){g(D).css(S.columns[J].displayCss)}if(S.columns[J].headerSpan>1){g(D).attr("colSpan",S.columns[J].headerSpan);I=S.columns[J].headerSpan-1}if(g.isPlainObject(S.columns[J].displayTooltip)){g(D).tooltip(S.columns[J].displayTooltip)}else{if(!o(S.columns[J].displayTooltip)){g(D).attr("title",S.columns[J].displayTooltip).tooltip()}}if(g.isFunction(S.columns[J].display)){S.columns[J].display(D)}else{if(!o(S.columns[J].display)){g(D).text(S.columns[J].display)}}}else{I--}}}g("td.resizable",H).resizable({handles:"e"});if(S.hideButtons.insert&&S.hideButtons.remove&&S.hideButtons.moveUp&&S.hideButtons.moveDown&&(!g.isArray(S.customRowButtons)||S.customRowButtons.length==0)){S._hideLastColumn=true}S._finalColSpan=S._visibleCount;if(!S.hideRowNumColumn){S._finalColSpan++}if(!S._hideLastColumn){S._finalColSpan++}if(!S._hideLastColumn){if(S.rowButtonsInFront){if(S.hideRowNumColumn){R.insertBefore(O=document.createElement("td"),R.firstChild)}else{E.colSpan=2;O=E}}else{R.appendChild(O=document.createElement("td"))}O.className="ui-widget-header"}if(S.caption){H.insertBefore(R=document.createElement("tr"),H.firstChild);if(S._sectionClasses.caption){R.className=S._sectionClasses.caption}R.appendChild(D=document.createElement("td"));D.id=S.idPrefix+"_caption_td";D.className="ui-state-active caption";D.colSpan=S._finalColSpan;if(g.isPlainObject(S.captionTooltip)){g(D).tooltip(S.captionTooltip)}else{if(!o(S.captionTooltip)){g(D).attr("title",S.captionTooltip).tooltip()}}if(g.isFunction(S.caption)){S.caption(D)}else{g(D).text(S.caption)}}T.appendChild(R=document.createElement("tr"));if(S._sectionClasses.footer){R.className=S._sectionClasses.footer}R.appendChild(D=document.createElement("td"));D.id=S.idPrefix+"_footer_td";D.colSpan=S._finalColSpan;g("<input/>").attr({type:"hidden",id:S.idPrefix+"_rowOrder",name:S.idPrefix+"_rowOrder"}).appendTo(D);if(S.hideButtons.append&&S.hideButtons.removeLast&&(!g.isArray(S.customFooterButtons)||S.customFooterButtons.length==0)){R.style.display="none"}else{if(!S.hideButtons.append){m(S.customGridButtons.append,"ui-icon-plusthick").attr({title:S._i18n.append}).addClass("append",S._buttonClasses.append).click(function(V){d(P,1,null,null);if(V&&V.preventDefault){V.preventDefault()}return false}).appendTo(D)}if(!S.hideButtons.removeLast){m(S.customGridButtons.removeLast,"ui-icon-closethick").attr({title:S._i18n.removeLast}).addClass("removeLast",S._buttonClasses.removeLast).click(function(V){j(P,null,this.value,false);if(V&&V.preventDefault){V.preventDefault()}return false}).appendTo(D)}if(S.customFooterButtons&&S.customFooterButtons.length){for(var M=S.customFooterButtons.length-1;M>=0;M--){var Q=S.customFooterButtons[M];if(Q&&Q.uiButton&&Q.click&&Q.atTheFront){g(D).prepend(r(P,Q))}}for(var M=0;M<S.customFooterButtons.length;M++){var Q=S.customFooterButtons[M];if(Q&&Q.uiButton&&Q.click&&!Q.atTheFront){g(D).append(r(P,Q))}}}}if(S.rowDragging){g(L).sortable({axis:"y",containment:P,handle:".rowDrag",helper:function(X,W){var Y=W.children();var V=W.clone();V.children().each(function(aa){g(this).width(Y.eq(aa).width());var Z=g("select",this);if(Z.length>0){for(var ac=0;ac<Z.length;ac++){var ab=Y.eq(aa).find("select");if(ab.length>ac){Z[ac].value=ab[ac].value}}}});return V},update:function(X,Y){var V=Y.item[0].id.substring(Y.item[0].id.lastIndexOf("_")+1);var W=Y.item[0].rowIndex-g("tr",H).length;q(P,Y.originalPosition.top>Y.position.top,V,W)}})}g(P).data("appendGrid",S);if(g.isArray(G.initData)){a(P,G.initData,true)}else{g(P).appendGrid("appendRow",S.initRows)}if(S._rowOrder.length==0){var K=g("<td></td>").text(S._i18n.rowEmpty).attr("colspan",S._finalColSpan);g("tbody",P).append(g("<tr></tr>").addClass("empty").append(K))}}return U},isReady:function(){var D=e(this,true);if(D){return true}return false},isDataLoaded:function(){var D=e(this);if(D){return D._isDataLoaded}return false},load:function(D){var E=e(this),F=this;if(E){if(D!=null&&D.length>0){a(F[0],D,false)}else{A(F[0])}}return F},appendRow:function(D){return this.appendGrid("insertRow",D)},insertRow:function(G,I,E){var H=e(this);if(H){if((g.isArray(G)&&G.length>0)||(g.isNumeric(G)&&G>0)){var D=this[0];insertResult=d(D,G,I,E);if(g.isNumeric(I)||g.isNumeric(E)){v(D,insertResult.rowIndex);var F=H._rowOrder[insertResult.addedRows[0]];g("#"+H.idPrefix+"_Insert_"+F,D).focus()}}}return this},removeRow:function(F,D){var E=e(this);if(E&&E._rowOrder.length>0){j(this[0],F,D,true)}return this},emptyGrid:function(){var D=e(this);if(D){A(this[0])}return target},moveUpRow:function(K,J){var E=e(this),I=this;if(E){var H=I[0],M,D,G,F,L=null;var N=H.getElementsByTagName("tbody")[0];if(g.isNumeric(K)&&K>0&&K<E._rowOrder.length){L=K;J=E._rowOrder[K]}else{if(g.isNumeric(J)){L=h(J,E)}}if(L!=null&&L>0){M=document.getElementById(E.idPrefix+"_Row_"+J,H);D=document.getElementById(E.idPrefix+"_Row_"+E._rowOrder[L-1],H);if(E.useSubPanel){G=document.getElementById(E.idPrefix+"_SubRow_"+J,H)}N.removeChild(M);if(E.useSubPanel){N.removeChild(G)}N.insertBefore(M,D);if(E.useSubPanel){N.insertBefore(G,D)}E._rowOrder[L]=E._rowOrder[L-1];E._rowOrder[L-1]=J;F=g("td.first",D).html();g("td.first",D).html(g("td.first",M).html());g("td.first",M).html(F);b(H,E);g("td.last button.moveUp",M).removeClass("ui-state-hover").blur();g("td.last button.moveUp",D).focus();if(E.afterRowSwapped){E.afterRowSwapped(H,L,L-1)}}}return I},moveDownRow:function(K,J){var F=e(this),I=this;if(F){var H=I[0],M,E,D,G,L=null;var N=H.getElementsByTagName("tbody")[0];if(g.isNumeric(K)&&K>=0&&K<F._rowOrder.length-1){L=K;J=F._rowOrder[K]}else{if(g.isNumeric(J)){L=h(J,F)}}if(L!=null&&L!=F._rowOrder.length-1){M=document.getElementById(F.idPrefix+"_Row_"+J,H);E=document.getElementById(F.idPrefix+"_Row_"+F._rowOrder[L+1],H);if(F.useSubPanel){D=document.getElementById(F.idPrefix+"_SubRow_"+F._rowOrder[L+1],H)}N.removeChild(E);N.insertBefore(E,M);if(F.useSubPanel){N.insertBefore(D,M)}F._rowOrder[L]=F._rowOrder[L+1];F._rowOrder[L+1]=J;G=g("td.first",E).html();g("td.first",E).html(g("td.first",M).html());g("td.first",M).html(G);b(H,F);g("td.last button.moveDown",M).removeClass("ui-state-hover").blur();g("td.last button.moveDown",E).focus();if(F.afterRowSwapped){F.afterRowSwapped(H,L,L+1)}}}return I},showColumn:function(G){var H=e(this);if(H&&G){var F=-1,E=this[0];for(var I=0;I<H.columns.length;I++){if(H.columns[I].name==G){F=I;break}}if(F!=-1&&H.columns[F].invisible){H._visibleCount++;H._finalColSpan++;g("#"+H.idPrefix+"_caption_td").attr("colSpan",H._finalColSpan);g("#"+H.idPrefix+"_footer_td").attr("colSpan",H._finalColSpan);g("#"+H.idPrefix+"_"+G+"_td_head").removeClass("invisible");for(var I=0;I<H._rowOrder.length;I++){var D=H._rowOrder[I];g("#"+H.idPrefix+"_"+G+"_td_"+D).removeClass("invisible");if(H.useSubPanel){g("#"+H.idPrefix+"_SubRow_"+D).attr("colSpan",H._visibleCount+(H._hideLastColumn?0:1))}}H.columns[F].invisible=false;b(E,H)}}return this},hideColumn:function(G){var H=e(this);if(H&&G){var F=-1,E=this[0];for(var I=0;I<H.columns.length;I++){if(H.columns[I].name==G){F=I;break}}if(F!=-1&&!H.columns[F].invisible){H._visibleCount--;H._finalColSpan--;g("#"+H.idPrefix+"_caption_td").attr("colSpan",H._finalColSpan);g("#"+H.idPrefix+"_footer_td").attr("colSpan",H._finalColSpan);g("#"+H.idPrefix+"_"+G+"_td_head").addClass("invisible");for(var I=0;I<H._rowOrder.length;I++){var D=H._rowOrder[I];g("#"+H.idPrefix+"_"+G+"_td_"+D).addClass("invisible");if(H.useSubPanel){g("#"+H.idPrefix+"_SubRow_"+D).attr("colSpan",H._visibleCount+(H._hideLastColumn?0:1))}}H.columns[F].invisible=true;b(E,H)}}return this},isColumnInvisible:function(D){var E=e(this);if(E&&D){for(var F=0;F<E.columns.length;F++){if(E.columns[F].name==D){return E.columns[F].invisible}}}return null},getRowCount:function(){var D=e(this);if(D){return D._rowOrder.length}return null},getUniqueIndex:function(E){var D=e(this);if(D&&g.isNumeric(E)&&E<D._rowOrder.length){return D._rowOrder[E]}return null},getRowIndex:function(D){var E=e(this);if(E&&g.isNumeric(D)){for(var F=0;F<E._rowOrder.length;F++){if(E._rowOrder[F]==D){return F}}}return null},getRowValue:function(H,E,G){var F=e(this),D=null;if(F){if(g.isNumeric(H)&&H>=0&&H<F._rowOrder.length){E=F._rowOrder[H]}if(!o(E)){D=i(F,E,G)}}return D},getAllValue:function(F){var E=e(this),D=null;if(E){D=F?{}:[];for(var G=0;G<E._rowOrder.length;G++){if(F){rowValue=i(E,E._rowOrder[G],G);g.extend(D,rowValue)}else{rowValue=i(E,E._rowOrder[G]);D.push(rowValue)}}if(F){D[E.rowCountName]=E._rowOrder.length}}return D},getCtrlValue:function(D,G){var E=e(this);if(E&&G>=0&&G<E._rowOrder.length){for(var F=0;F<E.columns.length;F++){if(E.columns[F].name===D){return c(E,F,E._rowOrder[G])}}}return null},setCtrlValue:function(D,H,F){var E=e(this);if(E&&H>=0&&H<E._rowOrder.length){for(var G=0;G<E.columns.length;G++){if(E.columns[G].name==D){p(E,G,E._rowOrder[H],F);break}}}return this},getCellCtrl:function(E,H){var F=e(this);if(F&&H>=0&&H<F._rowOrder.length){var D=F._rowOrder[H];for(var G=0;G<F.columns.length;G++){if(F.columns[G].name===E){return x(F.columns[G].type,F.idPrefix,E,D)}}}return null},getCellCtrlByUniqueIndex:function(E,D){var F=e(this);if(F){for(var G=0;G<F.columns.length;G++){if(F.columns[G].name===E){return x(F.columns[G].type,F.idPrefix,E,D)}}}return null},getRowOrder:function(){var D=e(this);if(D){return D._rowOrder.slice()}return null},getColumns:function(){var D=e(this);if(D){return D.columns.slice()}return null},isRowEmpty:function(E){var D=e(this);if(D){return u(D,E)}return null},removeEmptyRows:function(){var E=e(this);if(E){var D=this[0];for(var F=E._rowOrder.length;F>=0;F--){if(u(E,F)){j(D,null,E._rowOrder[F],true)}}return this}return null}};function e(E,D){var F=null;if(E.length==1){F=E.data("appendGrid");if(!F&&!D){alert(t.notInit)}}else{if(!D){alert(t.getValueMultiGrid)}}return F}function d(X,N,V,S){var ae=g(X).data("appendGrid");var ad=[],I=null,J,T,Z=[];var K=X.getElementsByTagName("thead")[0];var R=X.getElementsByTagName("tbody")[0];var aa,F=null,E;var M=N,D=false;if(g.isArray(N)){M=N.length;D=true}if(g.isNumeric(S)){for(var P=0;P<ae._rowOrder.length;P++){if(ae._rowOrder[P]==S){V=P;if(P!=0){I=P-1}break}}}else{if(g.isNumeric(V)){if(V>=ae._rowOrder.length){V=null}else{I=V-1}}else{if(ae._rowOrder.length!=0){V=null;I=ae._rowOrder.length-1}}}if(ae._rowOrder.length==0){g("tr.empty",X).remove()}for(var P=0;P<M;P++){ae._uniqueIndex++;J=ae._uniqueIndex;Z.length=0;if(g.isNumeric(V)){ae._rowOrder.splice(V,0,J);if(ae.useSubPanel){R.insertBefore(F=document.createElement("tr"),R.childNodes[V*2]);R.insertBefore(aa=document.createElement("tr"),R.childNodes[V*2])}else{R.insertBefore(aa=document.createElement("tr"),R.childNodes[V])}ad.push(V)}else{ae._rowOrder.push(J);R.appendChild(aa=document.createElement("tr"));if(ae.useSubPanel){R.appendChild(F=document.createElement("tr"))}ad.push(ae._rowOrder.length-1)}aa.id=ae.idPrefix+"_Row_"+J;if(ae._sectionClasses.body){aa.className=ae._sectionClasses.body}g(aa).data("appendGrid",J);if(F!=null){F.id=ae.idPrefix+"_SubRow_"+J;g(F).data("appendGrid",J);if(ae._sectionClasses.subPanel){F.className=ae._sectionClasses.subPanel}}if(!ae.hideRowNumColumn){aa.appendChild(E=document.createElement("td"));g(E).addClass("ui-widget-content first").text(ae._rowOrder.length);if(ae.useSubPanel){E.rowSpan=2}}for(var Q=0;Q<ae.columns.length;Q++){if(ae.columns[Q].type=="hidden"){Z.push(Q);continue}var H="ui-widget-content";if(ae.columns[Q].invisible){H+=" invisible"}aa.appendChild(E=document.createElement("td"));E.id=ae.idPrefix+"_"+ae.columns[Q].name+"_td_"+J;E.className=H;if(ae.columns[Q].cellCss!=null){g(E).css(ae.columns[Q].cellCss)}var G=ae.idPrefix+"_"+ae.columns[Q].name+"_"+J,O;if(g.isFunction(ae.nameFormatter)){O=ae.nameFormatter(ae.idPrefix,ae.columns[Q].name,J)}else{O=G}T=null;if(ae.columns[Q].type=="custom"){if(g.isFunction(ae.columns[Q].customBuilder)){T=ae.columns[Q].customBuilder(E,ae.idPrefix,ae.columns[Q].name,J)}}else{if(ae.columns[Q].type=="select"||ae.columns[Q].type=="ui-selectmenu"){T=document.createElement("select");T.id=G;T.name=O;if(g.isArray(ae.columns[Q].ctrlOptions)){if(ae.columns[Q].ctrlOptions.length>0){if(g.isPlainObject(ae.columns[Q].ctrlOptions[0])){var ag=null,ac=null;for(var U=0;U<ae.columns[Q].ctrlOptions.length;U++){if(!o(ae.columns[Q].ctrlOptions[U].group)){if(ag!=ae.columns[Q].ctrlOptions[U].group){ag=ae.columns[Q].ctrlOptions[U].group;ac=document.createElement("optgroup");ac.label=ag;T.appendChild(ac)}}else{ac=null}var W=g("<option/>").val(ae.columns[Q].ctrlOptions[U].value).text(ae.columns[Q].ctrlOptions[U].label);if(!o(ae.columns[Q].ctrlOptions[U].title)){W.attr("title",ae.columns[Q].ctrlOptions[U].title)}if(null==ac){W.appendTo(T)}else{W.appendTo(ac)}}}else{for(var U=0;U<ae.columns[Q].ctrlOptions.length;U++){T.options[T.options.length]=new Option(ae.columns[Q].ctrlOptions[U],ae.columns[Q].ctrlOptions[U])}}}}else{if(g.isPlainObject(ae.columns[Q].ctrlOptions)){for(var U in ae.columns[Q].ctrlOptions){T.options[T.options.length]=new Option(ae.columns[Q].ctrlOptions[U],U)}}else{if(typeof(ae.columns[Q].ctrlOptions)=="string"){var ab=ae.columns[Q].ctrlOptions.split(";");for(var U=0;U<ab.length;U++){var af=ab[U].indexOf(":");if(-1==af){T.options[T.options.length]=new Option(ab[U],ab[U])}else{T.options[T.options.length]=new Option(ab[U].substring(af+1,ab[U].length),ab[U].substring(0,af))}}}else{if(g.isFunction(ae.columns[Q].ctrlOptions)){ae.columns[Q].ctrlOptions(T)}}}}E.appendChild(T);if(ae.columns[Q].type=="ui-selectmenu"){g(T).selectmenu(ae.columns[Q].uiOption)}}else{if(ae.columns[Q].type=="checkbox"){T=document.createElement("input");T.type="checkbox";T.id=G;T.name=O;T.value=1;E.appendChild(T);E.style.textAlign="center"}else{if(ae.columns[Q].type=="textarea"){T=document.createElement("textarea");T.id=G;T.name=O;E.appendChild(T)}else{if(-1!=ae.columns[Q].type.search(/^(color|date|datetime|datetime\-local|email|month|number|range|search|tel|time|url|week)$/)){T=document.createElement("input");try{T.type=ae.columns[Q].type}catch(L){}T.id=G;T.name=O;E.appendChild(T)}else{T=document.createElement("input");T.type="text";T.id=G;T.name=O;E.appendChild(T);if(ae.columns[Q].type=="ui-datepicker"){g(T).datepicker(ae.columns[Q].uiOption)}else{if(ae.columns[Q].type=="ui-spinner"){g(T).spinner(ae.columns[Q].uiOption)}else{if(ae.columns[Q].type=="ui-autocomplete"){g(T).autocomplete(ae.columns[Q].uiOption)}}}}}}}}if(ae.columns[Q].type!="custom"){if(ae.columns[Q].ctrlAttr!=null){g(T).attr(ae.columns[Q].ctrlAttr)}if(ae.columns[Q].ctrlProp!=null){g(T).prop(ae.columns[Q].ctrlProp)}if(ae.columns[Q].ctrlCss!=null){g(T).css(ae.columns[Q].ctrlCss)}if(ae.columns[Q].ctrlClass!=null){g(T).addClass(ae.columns[Q].ctrlClass)}if(ae.columns[Q].uiTooltip){g(T).tooltip(ae.columns[Q].uiTooltip)}if(g.isFunction(ae.columns[Q].onClick)){g(T).click({caller:X,callback:ae.columns[Q].onClick,uniqueIndex:J},function(ah){ah.data.callback(ah,g(ah.data.caller).appendGrid("getRowIndex",ah.data.uniqueIndex))})}if(g.isFunction(ae.columns[Q].onChange)){g(T).change({caller:X,callback:ae.columns[Q].onChange,uniqueIndex:J},function(ah){ah.data.callback(ah,g(ah.data.caller).appendGrid("getRowIndex",ah.data.uniqueIndex))})}}if(D){p(ae,Q,J,N[P][ae.columns[Q].name])}else{if(!o(ae.columns[Q].value)){p(ae,Q,J,ae.columns[Q].value)}}}if(!ae._hideLastColumn||ae.columns.length>ae._visibleCount){if(!ae.rowButtonsInFront){aa.appendChild(E=document.createElement("td"))}else{if(!ae.hideRowNumColumn){aa.insertBefore(E=document.createElement("td"),aa.childNodes[1])}else{aa.insertBefore(E=document.createElement("td"),aa.firstChild)}}E.className="ui-widget-content last";if(ae._hideLastColumn){E.style.display="none"}if(!ae.hideButtons.insert){m(ae.customGridButtons.insert,"ui-icon-arrowreturnthick-1-w").attr({id:ae.idPrefix+"_Insert_"+J,title:ae._i18n.insert,tabindex:-1}).addClass("insert",ae._buttonClasses.insert).data("appendGrid",{uniqueIndex:J}).click(function(ai){var ah=g(this).data("appendGrid").uniqueIndex;g(X).appendGrid("insertRow",1,null,ah);if(ai&&ai.preventDefault){ai.preventDefault()}return false}).appendTo(E)}if(!ae.hideButtons.remove){m(ae.customGridButtons.remove,"ui-icon-trash").attr({id:ae.idPrefix+"_Delete_"+J,title:ae._i18n.remove,tabindex:-1}).addClass("remove",ae._buttonClasses.remove).data("appendGrid",{uniqueIndex:J}).click(function(ai){var ah=g(this).data("appendGrid").uniqueIndex;j(X,null,ah,false);if(ai&&ai.preventDefault){ai.preventDefault()}return false}).appendTo(E)}if(!ae.hideButtons.moveUp){m(ae.customGridButtons.moveUp,"ui-icon-arrowthick-1-n").attr({id:ae.idPrefix+"_MoveUp_"+J,title:ae._i18n.moveUp,tabindex:-1}).addClass("moveUp",ae._buttonClasses.moveUp).data("appendGrid",{uniqueIndex:J}).click(function(ai){var ah=g(this).data("appendGrid").uniqueIndex;g(X).appendGrid("moveUpRow",null,ah);if(ai&&ai.preventDefault){ai.preventDefault()}return false}).appendTo(E)}if(!ae.hideButtons.moveDown){m(ae.customGridButtons.moveDown,"ui-icon-arrowthick-1-s").attr({id:ae.idPrefix+"_MoveDown_"+J,title:ae._i18n.moveDown,tabindex:-1}).addClass("moveDown",ae._buttonClasses.moveDown).data("appendGrid",{uniqueIndex:J}).click(function(ai){var ah=g(this).data("appendGrid").uniqueIndex;g(X).appendGrid("moveDownRow",null,ah);if(ai&&ai.preventDefault){ai.preventDefault()}return false}).appendTo(E)}if(ae.rowDragging){g("<div/>").addClass("rowDrag ui-state-default ui-corner-all",ae._buttonClasses.rowDrag).attr("title",ae._i18n.rowDrag).append(g("<div/>").addClass("ui-icon ui-icon-carat-2-n-s").append(g("<span/>").addClass("ui-button-text").text("Drag"))).appendTo(E)}for(var Q=0;Q<Z.length;Q++){T=document.createElement("input");T.id=ae.idPrefix+"_"+ae.columns[Z[Q]].name+"_"+J;T.name=T.id;T.type="hidden";if(D){T.value=N[P][ae.columns[Z[Q]].name]}else{if(!o(ae.columns[Z[Q]].value)){T.value=ae.columns[Z[Q]].value}}E.appendChild(T)}if(ae.customRowButtons&&ae.customRowButtons.length){for(var Q=ae.customRowButtons.length-1;Q>=0;Q--){var Y=ae.customRowButtons[Q];if(Y&&Y.uiButton&&Y.click&&Y.atTheFront){g(E).prepend(z(X,Y,J))}}for(var Q=0;Q<ae.customRowButtons.length;Q++){var Y=ae.customRowButtons[Q];if(Y&&Y.uiButton&&Y.click&&!Y.atTheFront){g(E).append(z(X,Y,J))}}}}if(ae.useSubPanel){F.appendChild(E=document.createElement("td"));E.className="ui-widget-content";E.colSpan=ae._visibleCount+(ae._hideLastColumn?0:1);if(g.isFunction(ae.subPanelBuilder)){ae.subPanelBuilder(E,J)}}}b(X,ae);if(g.isNumeric(V)){if(g.isFunction(ae.afterRowInserted)){ae.afterRowInserted(X,I,ad)}}else{if(g.isFunction(ae.afterRowAppended)){ae.afterRowAppended(X,I,ad)}}return{addedRows:ad,parentIndex:I,rowIndex:V}}function r(D,F){var E=g("<button/>").attr({type:"button",tabindex:-1}).button(F.uiButton).click({tbWhole:D},F.click);if(F.btnClass){E.addClass(F.btnClass)}if(F.btnCss){E.css(F.btnCss)}if(F.btnAttr){E.attr(F.btnAttr)}return E}function z(E,G,D){var F=g("<button/>").val(D).attr({type:"button",tabindex:-1}).button(G.uiButton).click({tbWhole:E,uniqueIndex:D},function(H){var I=g(H.data.tbWhole).appendGrid("getRowValue",null,H.data.uniqueIndex);G.click(H,H.data.uniqueIndex,I)});if(G.btnClass){F.addClass(G.btnClass)}if(G.btnCss){F.css(G.btnCss)}if(G.btnAttr){F.attr(G.btnAttr)}return F}function j(E,K,D,H){var F=g(E).data("appendGrid");var J=E.getElementsByTagName("tbody")[0];if(g.isNumeric(D)){for(var I=0;I<F._rowOrder.length;I++){if(F._rowOrder[I]==D){K=I;break}}}if(g.isNumeric(K)){if(H||typeof(F.beforeRowRemove)!="function"||F.beforeRowRemove(E,K)){F._rowOrder.splice(K,1);if(F.useSubPanel){J.removeChild(J.childNodes[K*2]);J.removeChild(J.childNodes[K*2])}else{J.removeChild(J.childNodes[K])}b(E,F);v(E,K);if(g.isFunction(F.afterRowRemoved)){F.afterRowRemoved(E,K)}}}else{if(H||!g.isFunction(F.beforeRowRemove)||F.beforeRowRemove(E,F._rowOrder.length-1)){D=F._rowOrder.pop();J.removeChild(J.lastChild);if(F.useSubPanel){J.removeChild(J.lastChild)}b(E,F);if(g.isFunction(F.afterRowRemoved)){F.afterRowRemoved(E,null)}}}if(F._rowOrder.length==0){var G=g("<td></td>").text(F._i18n.rowEmpty).attr("colspan",F._finalColSpan);g("tbody",E).append(g("<tr></tr>").addClass("empty").append(G))}}function A(D){var E=g(D).data("appendGrid");g("tbody",D).empty();E._rowOrder.length=0;E._uniqueIndex=0;b(D,E);if(E._rowOrder.length==0){var F=g("<td></td>").text(E._i18n.rowEmpty).attr("colspan",E._finalColSpan);g("tbody",D).append(g("<tr></tr>").addClass("empty").append(F))}}function v(D,G){var E=g(D).data("appendGrid");if(!E.hideRowNumColumn){for(var F=G;F<E._rowOrder.length;F++){g("#"+E.idPrefix+"_Row_"+E._rowOrder[F]+" td.first",D).text(F+1)}}}function a(J,F,I){var N,H,E,K,M;var G=g(J).data("appendGrid");if(G){N=J.getElementsByTagName("tbody")[0];g(N).empty();G._rowOrder.length=0;G._uniqueIndex=0;if(F!=null&&F.length){M=d(J,F.length,null,null);for(var D=0;D<M.addedRows.length;D++){for(var L=0;L<G.columns.length;L++){p(G,L,G._rowOrder[D],F[D][G.columns[L].name])}if(g.isFunction(G.rowDataLoaded)){G.rowDataLoaded(J,F[D],D,G._rowOrder[D])}}}G._isDataLoaded=true;if(I){G.initData=null}g(J).data("appendGrid",G);if(g.isFunction(G.dataLoaded)){G.dataLoaded(J,F)}}}function h(D,E){for(var F=0;F<E._rowOrder.length;F++){if(E._rowOrder[F]==D){return F}}return null}function o(D){return typeof(D)=="undefined"||D==null}function C(E,D){if(!o(E)&&g.isPlainObject(E)&&!o(E[D])){return E[D]}return null}function b(D,E){g(D).data("appendGrid",E);g("#"+E.idPrefix+"_rowOrder",D).val(E._rowOrder.join())}function B(E,D){var G=null;for(var F=0;F<E._rowOrder.length;F++){if(E._rowOrder[F]==D){return F}}return G}function i(D,E,F){var M={},J=null,I=(o(F)?"":"_"+F);for(var G=0;G<D.columns.length;G++){J=D.columns[G].name+I;M[J]=c(D,G,E)}if(D.useSubPanel&&g.isFunction(D.subPanelGetter)){var L=D.subPanelGetter(E);if(g.isPlainObject(L)){if(I==""){g.extend(M,L)}else{var K={};for(var H in L){K[H+I]=L[H]}g.extend(M,K)}}}return M}function c(H,F,D){var I=null,G=H.columns[F].type,E=H.columns[F].name;if(G=="checkbox"){I=x(G,H.idPrefix,E,D);if(I==null){return null}else{return I.checked?1:0}}else{if(G=="custom"){if(g.isFunction(H.columns[F].customGetter)){return H.columns[F].customGetter(H.idPrefix,E,D)}else{return null}}else{I=x(G,H.idPrefix,E,D);if(I==null){return null}else{return I.value}}}}function x(F,G,E,D){return document.getElementById(G+"_"+E+"_"+D)}function p(H,F,D,I){var G=H.columns[F].type;var E=H.columns[F].name;if(G=="checkbox"){x(G,H.idPrefix,E,D).checked=(I!=null&&I!=0)}else{if(G=="custom"){if(g.isFunction(H.columns[F].customSetter)){H.columns[F].customSetter(H.idPrefix,E,D,I)}}else{if(G=="ui-selectmenu"){var J=x(G,H.idPrefix,E,D);J.value=(I==null?"":I);g(J).selectmenu("refresh")}else{x(G,H.idPrefix,E,D).value=(I==null?"":I)}}}}function q(E,J,D,F){var G=g(E).data("appendGrid");var I=-1;for(var H=0;H<G._rowOrder.length;H++){if(G._rowOrder[H]==D){if(J){I=F;G._rowOrder.splice(H,1);G._rowOrder.splice(F,0,D)}else{I=H;G._rowOrder.splice(F+1,0,D);G._rowOrder.splice(H,1)}break}}v(E,I);b(E,G);if(g.isFunction(G.afterRowDragged)){G.afterRowDragged(E,F)}}function m(F,D){var E=null;if(F){if(g.isFunction(F)){E=g(F())}else{if(F.nodeType){E=g(F).clone()}else{if(F.icons){E=g("<button/>").attr({type:"button"}).button(F)}}}}if(!E){E=g("<button/>").attr({type:"button"}).button({icons:{primary:D},text:false})}return E}function u(H,J){for(var I=0;I<H.columns.length;I++){var E=H._rowOrder[J];var G=c(H,I,E);if(g.isFunction(H.columns[I].emptyCriteria)){if(!H.columns[I].emptyCriteria(G)){return false}}else{var D=null;if(!o(H.columns[I].emptyCriteria)){D=H.columns[I].emptyCriteria}else{if(H.columns[I].type=="checkbox"){D=0}else{if(H.columns[I].type=="select"||H.columns[I].type=="ui-selectmenu"){var F=x(H.columns[I].type,H.idPrefix,H.columns[I].name,E).options;if(F.length>0){D=F[0].value}else{D=""}}else{D=""}}}if(G!=D){return false}}}return true}g.fn.appendGrid=function(D){if(k[D]){return k[D].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof(D)==="object"||!D){return k.init.apply(this,arguments)}else{alert(t.notSupportMethod+D)}}}})(jQuery);